<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


    <meta http-equiv="X-UA-compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B"
        crossorigin="anonymous">

    <title>Average Delivery Schedules</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="css/main.css">
    <style>
        body {
            font: 12px Arial;
        }

        path {
            stroke: steelblue;
            stroke-width: 2;
            fill: none;
        }

        .axis path,
        .axis line {
            fill: none;
            stroke: grey;
            stroke-width: 1;
            shape-rendering: crispEdges;
        }
    </style>

</head>

<body>

    <div class="container">
        <div class="row">
            <section class="col-12">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Overview</a>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About this tool</a>
                            <li class="nav-item">
                                <a class="nav-link" href="deliveryplans.html">Delivery Plans</a>
                                <li class="nav-item">
                                    <a class="nav-link" href="customerorders.html">Customer Orders</a>
                                    <li class="nav-item">
                                        <a class="nav-link" href="varianceanalysis.html">Variance Analysis</a>
                                        <li class="nav-item">
                                            <a class="nav-link active" href="avgdeliveryschedules.html">Average Delivery Schedules</a>
                                            <li class="nav-item">
                                                <a class="nav-link" href="chorddiagram.html">Chord Diagram</a>
                                                <li class="nav-item">
                                                    <a class="nav-link" href="barchart.html">Bar Chart</a>
                </ul>
        </div>
    </div>

    <script src="http://d3js.org/d3.v4.min.js"></script>


    <!-- <script src=".js/d3.v4.3.0.js"></script> -->

    <!-- <div id="option"> -->
    <!-- <input name="uploadButton" -->
    <!-- type="button" -->
    <!-- value="Upload" -->
    <!-- onclick="uploadData()" -->
    <!-- /> </div>  -->

    <div style="padding-left:39px">
        <br>
        <h3>Average Delivery Schedules</h3>
        <p> NOTE: This graph shows the final customer orders received and an average line calculated from the average of those
            order amounts.
            <br>
            <br> The legend on the right shows the Calendar weeks depicted on the graph shown with different colors.</p>
    </div>

    <script>

        d3.json("data/deliveryschedules.json", function (error, data) {
            if (error) throw error;
            console.log(data);
            //console.log('2', parseInt('2'));

            var legendOffset = 140;

            var margin = { top: 20, right: 25, bottom: 30, left: 55 },
                width = 960 - margin.left - margin.right,
                height = 500 - margin.top - margin.bottom;

            var x = d3.scaleLinear()
                .domain([
                    d3.min([0, d3.min(data, function (d) { return d.CalendarWeeks })]),
                    d3.max([0, d3.max(data, function (d) { return d.CalendarWeeks })])
                ])
                .range([0, width])

            var y = d3.scaleLinear()
                .domain([
                    d3.min([0, d3.min(data, function (d) { return (d.Orders) })]),
                    d3.max([0, 700])
                ])
                .range([height, 0])

            var product = function (d) { return d.Product; },
                color = d3.scaleOrdinal(d3.schemeCategory10);


            var xAxis = d3.axisBottom(x)
                .ticks(10);

            var yAxis = d3.axisLeft(y);
            // .ticks(11)

            // Define the line
            var valueline = d3.line()
                .x(function (d) { return x(d.CalendarWeeks); })
                .y(function (d) { return y(d.Orders); });

            var svg = d3.select("body").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            var line = d3.line()
                .x(function (d) {
                    return x(d.x);
                })
                .y(function (d) {
                    return y(d.rline);
                });

            data.forEach(function (d) {
                d.x = +d.x;
                d.y = +d.y;
                d.rline = +d.rline;
            });
            // Circles
/*             var circles = svg.selectAll('circle')
                .data(data)
                .enter()
                .append('circle')
                .attr('cx', function (d) { return x(d.CalendarWeeks) })
                .attr('cy', function (d) { return y(d.Orders) })
                .attr('r', '7')
                .attr('stroke', 'black')
                .attr('stroke-width', 1)
                .attr('fill', function (d, i) { return color(product(d)); })
                .on('mouseover', function (d) {
                    d3.select(this)
                        .transition()
                        .duration(500)
                        .style("opacity", .9)
                        .attr('r', 10)
                        .attr('stroke-width', 3)
                })
                .on('mouseout', function () {
                    d3.select(this)
                        .transition()
                        .duration(500)
                        .attr('r', 7)
                        .attr('stroke-width', 1)
                })
                .append('title') // Tooltip
                .text(function (d) {
                    return d.Product +
                        '\nFinal Customer Order: ' + d.Orders +
                        '\nCalendar Week: ' + d.CalendarWeeks
                })


            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis)
                .append("text")
                .attr("class", "label")
                .attr("x", width)
                .attr("y", -10)
                .attr('dy', '.71em')
                .style("text-anchor", "end")
                .text("Calendar Weeks");

            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
                .append("text")
                .attr("class", "label")
                .attr("transform", "rotate(-90)")
                .attr("x", 0)
                .attr("y", 5)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .text("Final Customer Orders (pcs)")

            //Add value line
             	svg.append("path")	
                    .attr("class", "line")
                    .attr("d", valueline)
                    .data([data]);  

            var legend = svg.selectAll(".legend")
                .data(color.domain())
                .enter().append("g")
                .attr("class", "legend")
                .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")"; });

            legend.append("rect")
                .attr("x", width - 10)
                .attr("width", 10)
                .attr("height", 10)
                .style("opacity", 0.5)
                .style("fill", color);

            legend.append("text")
                .attr("x", width - 24)
                .attr("y", 10)
                .attr("yAxis", ".35em")
                .style("text-anchor", "end")
                .text(function (d) { return d; });
 */

        });

    </script>


    <svg width="960" height="500">
        <g transform="translate(55,20)">
            <circle cx="88" cy="64.28571428571433" r="7" stroke="black" stroke-width="1" fill="#1f77b4">
                <title>Product1 Final Customer Order: 600 Calendar Week: 1</title>
            </circle>
            <circle cx="176" cy="115.71428571428572" r="7" stroke="black" stroke-width="1" fill="#ff7f0e">
                <title>Product2 Final Customer Order: 520 Calendar Week: 2</title>
            </circle>
            <circle cx="264" cy="96.42857142857144" r="7" stroke="black" stroke-width="1" fill="#2ca02c">
                <title>Product3 Final Customer Order: 550 Calendar Week: 3</title>
            </circle>
            <circle cx="352" cy="212.14285714285714" r="7" stroke="black" stroke-width="1" fill="#d62728">
                <title>Product4 Final Customer Order: 370 Calendar Week: 4</title>
            </circle>
            <circle cx="440" cy="70.71428571428572" r="7" stroke="black" stroke-width="1" fill="#9467bd">
                <title>Product5 Final Customer Order: 590 Calendar Week: 5</title>
            </circle>
            <circle cx="528" cy="147.8571428571429" r="7" stroke="black" stroke-width="1" fill="#8c564b">
                <title>Product6 Final Customer Order: 470 Calendar Week: 6</title>
            </circle>
            <circle cx="616" cy="51.428571428571445" r="7" stroke="black" stroke-width="1" fill="#e377c2">
                <title>Product7 Final Customer Order: 620 Calendar Week: 7</title>
            </circle>
            <circle cx="704" cy="90" r="7" stroke="black" stroke-width="1" fill="#7f7f7f">
                <title>Product8 Final Customer Order: 560 Calendar Week: 8</title>
            </circle>
            <circle cx="792" cy="96.42857142857144" r="7" stroke="black" stroke-width="1" fill="#bcbd22">
                <title>Product9 Final Customer Order: 550 Calendar Week: 9</title>
            </circle>
            <circle cx="880" cy="160.71428571428567" r="7" stroke="black" stroke-width="1" fill="#17becf">
                <title>Product10 Final Customer Order: 450 Calendar Week: 10</title>
            </circle>
            <g class="x axis" transform="translate(0,450)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle">
                <path class="domain" stroke="#000" d="M0.5,6V0.5H880.5V6"></path>
                <g class="tick" opacity="1" transform="translate(0.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">0</text>
                </g>
                <g class="tick" opacity="1" transform="translate(88.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">1</text>
                </g>
                <g class="tick" opacity="1" transform="translate(176.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">2</text>
                </g>
                <g class="tick" opacity="1" transform="translate(264.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">3</text>
                </g>
                <g class="tick" opacity="1" transform="translate(352.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">4</text>
                </g>
                <g class="tick" opacity="1" transform="translate(440.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">5</text>
                </g>
                <g class="tick" opacity="1" transform="translate(528.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">6</text>
                </g>
                <g class="tick" opacity="1" transform="translate(616.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">7</text>
                </g>
                <g class="tick" opacity="1" transform="translate(704.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">8</text>
                </g>
                <g class="tick" opacity="1" transform="translate(792.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">9</text>
                </g>
                <g class="tick" opacity="1" transform="translate(880.5,0)">
                    <line stroke="#000" y2="6"></line>
                    <text fill="#000" y="9" dy="0.71em">10</text>
                </g>
                <path class="domain" d="M0,6V0H880V6"></path>
                <text class="label" x="880" y="-10" dy=".71em" style="text-anchor: end;">Calendar Weeks</text>
                <!-- <text class="label" x="880" y="-10" dy=".71em" style="text-anchor: end;">Calendar Weeks</text> -->
            </g>
            <g class="y axis" fill="none" font-size="10" font-family="sans-serif" text-anchor="end">
                <path class="domain" stroke="#000" d="M-6,450.5H0.5V0.5H-6"></path>
                <g class="tick" opacity="1" transform="translate(0,450.5)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">0</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,418.3571428571429)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">50</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,386.2142857142857)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">100</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,354.07142857142856)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">150</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,321.92857142857144)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">200</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,289.7857142857143)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">250</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,257.64285714285717)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">300</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,225.5)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">350</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,193.3571428571429)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">400</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,161.21428571428567)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">450</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,129.07142857142856)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">500</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,96.92857142857144)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">550</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,64.78571428571433)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">600</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,32.64285714285711)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">650</text>
                </g>
                <g class="tick" opacity="1" transform="translate(0,0.5)">
                    <line stroke="#000" x2="-6"></line>
                    <text fill="#000" x="-9" dy="0.32em">700</text>
                </g>
                <text class="label" transform="rotate(-90)" x="0" y="5" dy=".71em" style="text-anchor: end;">Final Customer Orders (pcs)</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="60" width="10" height="10" style="opacity: 0.5; fill: rgb(31, 119, 180);"></rect>
                <text x="55" y="10" yAxis=".35em" style="text-anchor: end;">Product1</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="145" width="10" height="10" style="opacity: 0.5; fill: rgb(255, 127, 14);"></rect>
                <text x="140" y="10" yAxis=".35em" style="text-anchor: end;">Product2</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="230" width="10" height="10" style="opacity: 0.5; fill: rgb(44, 160, 44);"></rect>
                <text x="225" y="10" yAxis=".35em" style="text-anchor: end;">Product3</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="315" width="10" height="10" style="opacity: 0.5; fill: rgb(214, 39, 40);"></rect>
                <text x="310" y="10" yAxis=".35em" style="text-anchor: end;">Product4</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="400" width="10" height="10" style="opacity: 0.5; fill: rgb(148, 103, 189);"></rect>
                <text x="395" y="10" yAxis=".35em" style="text-anchor: end;">Product5</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="485" width="10" height="10" style="opacity: 0.5; fill: rgb(140, 86, 75);"></rect>
                <text x="480" y="10" yAxis=".35em" style="text-anchor: end;">Product6</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="570" width="10" height="10" style="opacity: 0.5; fill: rgb(227, 119, 194);"></rect>
                <text x="565" y="10" yAxis=".35em" style="text-anchor: end;">Product7</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="655" width="10" height="10" style="opacity: 0.5; fill: rgb(127, 127, 127);"></rect>
                <text x="650" y="10" yAxis=".35em" style="text-anchor: end;">Product8</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="740" width="10" height="10" style="opacity: 0.5; fill: rgb(188, 189, 34);"></rect>
                <text x="735" y="10" yAxis=".35em" style="text-anchor: end;">Product9</text>
            </g>
            <g class="legend" transform="translate(0,470)">
                <rect x="825" width="10" height="10" style="opacity: 0.5; fill: rgb(23, 190, 207);"></rect>
                <text x="820" y="10" yAxis=".35em" style="text-anchor: end;">Product10</text>
            </g>
        </g>
    </svg>
</body>

</html>